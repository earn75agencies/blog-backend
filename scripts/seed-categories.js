const mongoose = require('mongoose');
const dotenv = require('dotenv');
const Category = require('../models/Category.model');

dotenv.config();

// Category taxonomy organized by main groups
const categoryTaxonomy = {
  'Tech & AI': {
    level: 0,
    icon: 'üíª',
    color: '#3B82F6',
    children: {
      'AI Tools & Tutorials': {
        level: 1,
        children: [
          'AI tools & tutorials',
          'AI content generation',
          'AI chatbots & assistants',
          'AI-powered SEO tools',
          'AI art & image generation',
          'AI music tools',
          'AI writing assistants',
          'AI productivity hacks',
          'AI-powered analytics',
          'AI for content marketing',
          'AI in social media',
          'AI chatbots for business',
          'AI for customer support',
          'AI automation tools for startups',
          'AI-powered recommendation engines',
          'AI for personal productivity',
          'AI-powered virtual assistants',
          'AI for video editing',
          'AI in gaming',
          'AI content moderation',
          'AI ethics case studies',
          'Generative AI tutorials',
          'AI-powered design tools',
          'AI art & music creation',
          'AI for small businesses',
          'AI in marketing automation',
          'AI-powered chatbots',
          'AI content creation tools',
          'Deepfake technology guides',
          'AI ethics & regulations',
          'AI for healthcare innovations',
          'AI-powered translation tools',
          'AI for e-commerce optimization',
          'AI in finance & trading',
          'Robotic process automation (RPA)',
          'AI in HR & recruitment',
          'AI-powered analytics tools',
          'AI in education',
          'AI and IoT integration',
          'Voice AI assistants reviews',
          'AI in creative writing',
          'AI video editors',
          'AI in retail personalization',
          'AI startups & investment',
          'AI-powered SEO tools',
          'AI for social media management',
          'AI in healthcare diagnostics',
          'AI-generated news & journalism',
          'Machine learning datasets',
          'AI-powered video games',
          'AI robotics competitions',
          'AI-driven marketing campaigns',
          'AI in agriculture',
          'AI in space tech',
          'AI for climate prediction',
          'AI in logistics & supply chain',
          'AI for cybersecurity threat detection',
          'AI in personalized medicine',
          'AI-powered financial advisors',
          'AI research breakthroughs',
        ],
      },
      'Software Development': {
        level: 1,
        children: [
          'Software development',
          'Coding tutorials (Python, JS, Java, C++)',
          'Web development',
          'Mobile app development',
          'Programming frameworks & libraries',
          'API tutorials & guides',
          'Tech tutorial videos',
          'Coding bootcamp reviews',
          'Programming challenges & contests',
          'GitHub projects & showcases',
          'Software updates & changelogs',
          'Open-source contributions',
          'JavaScript frameworks blogs',
          'Python tutorials',
          'Rust & Go guides',
          'Dev tutorials & coding challenges',
          'Open-source software projects',
          'Developer community blogs',
        ],
      },
      'Cybersecurity': {
        level: 1,
        children: [
          'Cybersecurity',
          'Cybersecurity news & alerts',
          'Ethical hacking guides',
          'Penetration testing tutorials',
          'Bug bounty programs',
          'Privacy & data protection guides',
          'VPN & encryption reviews',
          'Security tools reviews',
          'Ethical hacking blogs',
          'Privacy & data protection',
          'AI in cybersecurity',
          'AI for cybersecurity threat detection',
        ],
      },
      'Blockchain & Crypto': {
        level: 1,
        children: [
          'Blockchain & crypto',
          'NFTs & digital assets',
          'Web3 development',
          'Cryptocurrency wallets & security',
          'NFT marketplaces',
          'Smart contracts & Solidity',
          'Crypto investment strategies',
          'Crypto mining tutorials',
          'Blockchain project reviews',
          'Tokenomics guides',
          'Crypto news & alerts',
          'Decentralized finance (DeFi)',
          'Technical analysis for crypto',
          'Blockchain technology',
          'Crypto market insights',
          'NFTs & digital collectibles',
          'Smart contracts tutorials',
          'Cryptocurrency wallets',
          'DeFi platform tutorials',
          'NFT-backed investments',
          'Crypto trading bots',
          'Cryptocurrency tax guides',
          'Crypto trading strategies',
          'Stablecoins insights',
          'Blockchain for beginners',
          'Crypto wallet reviews',
          'NFT collectibles & art',
          'Web3 apps & development',
          'Tokenomics insights',
          'DAO management guides',
          'Crypto portfolio management',
          'Crypto lending platforms',
          'Altcoins analysis',
          'Layer 2 blockchain solutions',
          'Crypto staking guides',
          'Cross-chain solutions',
          'Blockchain gaming',
          'Blockchain in supply chain',
          'Crypto security best practices',
          'Blockchain startups to watch',
          'Crypto news aggregation',
        ],
      },
      'Cloud & DevOps': {
        level: 1,
        children: [
          'Cloud computing & DevOps',
          'SaaS reviews',
          'Cloud hosting comparisons',
          'Cloud storage solutions',
          'Hosting & server setup tutorials',
          'Cloud AI services reviews',
          'DevOps practices',
          'DevOps pipelines & CI/CD',
          'Cloud-native apps',
          'Edge computing',
        ],
      },
      'Data & Analytics': {
        level: 1,
        children: [
          'Data science & analytics',
          'Machine learning tutorials',
          'Big data analytics',
          'Data science projects',
          'Machine learning guides',
          'Deep learning tutorials',
          'Neural networks guides',
          'AI model deployment',
          'Computer vision projects',
          'NLP tutorials',
          'Speech recognition guides',
        ],
      },
      'Hardware & Gadgets': {
        level: 1,
        children: [
          'Gadgets & hardware reviews',
          'Computer hardware building guides',
          'PC gaming setups',
          'Tech DIY projects',
          'Smart home devices',
          'Wearables & smartwatches',
          'Gaming hardware reviews',
          'Gaming accessories',
          'PC gaming builds',
        ],
      },
      'Emerging Tech': {
        level: 1,
        children: [
          'VR/AR tech',
          'Quantum computing',
          'Robotics & IoT',
          'Open-source projects',
          'Tech entrepreneurship',
          'Startups & innovation',
          'Tech investment guides',
          'Tech news & updates',
          'AR mobile apps',
          'VR gaming experiences',
          'Quantum computing tutorials',
          'Quantum software development',
          'AR/VR experiences',
          'Mixed reality applications',
          'Quantum computing blogs',
          'Internet of Things (IoT) guides',
          'Robotics & automation',
          'Autonomous vehicles updates',
          'Drone tech & AI integration',
          'Autonomous vehicle tech',
        ],
      },
    },
  },
  'Finance & Business': {
    level: 0,
    icon: 'üí∞',
    color: '#10B981',
    children: {
      'Personal Finance': {
        level: 1,
        children: [
          'Personal finance tips',
          'Investing in stocks',
          'Forex trading',
          'Cryptocurrency investing',
          'Passive income strategies',
          'Side hustles',
          'Wealth building tips',
          'Financial planning',
          'Tax & accounting guides',
          'Credit card reviews',
          'Debt management',
          'Loan comparisons',
          'Personal budgeting tips',
          'Investment portfolio management',
          'Stock analysis',
          'Dividend investing',
          'Mutual funds guides',
          'ETFs & index funds',
          'Retirement planning',
          'Pension strategies',
          'Early retirement guides (FIRE)',
          'Investment apps reviews',
          'Crowdsourced investment platforms',
          'Peer-to-peer lending',
          'Micro-investing apps',
          'ESG & sustainable investing',
          'Crowdfunding platforms',
          'Digital banking guides',
          'Credit repair strategies',
          'Investment portfolio tracking',
          'Stock market analysis',
          'Real estate micro-investing',
          'Financial planning for millennials',
          'Wealth-building strategies',
          'Personal finance apps',
          'Financial literacy for students',
          'Small business tax tips',
          'Investment trends & news',
          'Stock trading platforms',
          'Trading psychology',
          'Personal finance for couples',
          'Financial independence tips',
          'Alternative investments',
        ],
      },
      'Business & Entrepreneurship': {
        level: 1,
        children: [
          'Freelancing guides',
          'Startups & entrepreneurship',
          'E-commerce strategies',
          'Dropshipping',
          'Real estate investments',
          'Business tools & software',
          'Marketing strategies',
          'Affiliate marketing',
          'Small business management',
          'Crowdfunding & fundraising',
          'Business automation',
          'Business case studies',
          'Business model innovation',
          'Startup funding guides',
          'Angel investing',
          'Venture capital guides',
          'IPO analysis',
          'Corporate finance tips',
          'Business negotiation strategies',
          'Sales funnels & conversion optimization',
          'Branding & design guides',
          'E-commerce product reviews',
          'Shopify & WooCommerce tips',
          'Online marketplaces reviews',
          'SaaS business growth',
          'Digital marketing analytics',
          'SEO tutorials',
          'Social media marketing',
          'Email marketing campaigns',
          'Influencer marketing',
          'Growth hacking guides',
          'Paid advertising strategies',
          'Retargeting campaigns',
          'Content marketing',
          'Affiliate program optimization',
          'Marketing automation tools',
          'Video marketing guides',
          'Podcast marketing',
          'Mobile app monetization',
          'Subscription business models',
          'Online course creation',
          'Membership site strategies',
          'E-book publishing & monetization',
          'Digital product ideas',
          'Freelance marketplaces',
          'Remote work business tips',
          'Productivity tools for businesses',
          'Project management tools',
          'Leadership & management',
          'HR & recruitment tips',
          'Employee engagement strategies',
          'Workplace productivity hacks',
          'Business networking guides',
          'Negotiation skills',
          'Corporate social responsibility',
          'Business ethics & compliance',
          'Business analytics tools',
          'KPI tracking guides',
          'Revenue forecasting',
          'Profit margin optimization',
          'Customer retention strategies',
          'Client acquisition strategies',
          'Sales strategies & tactics',
          'E-commerce logistics guides',
          'Dropshipping suppliers guides',
          'Inventory management tips',
          'Supply chain optimization',
          'B2B vs B2C marketing',
          'Marketplace integration guides',
          'Business scalability tips',
          'SaaS subscription management',
          'Online store UX optimization',
          'Product photography guides',
          'Branding & design trends',
          'E-commerce SEO',
          'Mobile commerce strategies',
          'Business incubator reviews',
          'Startup mentorship guides',
          'Business loan strategies',
          'Subscription-based business models',
          'E-commerce platform comparisons',
          'Dropshipping micro-guides',
          'Influencer marketing for business',
          'Affiliate marketing strategies',
          'Product launch guides',
          'SaaS monetization tactics',
          'Mobile payment trends',
          'Fintech startups news',
          'Business automation workflows',
          'Remote work productivity',
          'Freelancing tools & software',
          'Startup funding & pitch guides',
          'Venture capital news',
          'Angel investing strategies',
        ],
      },
    },
  },
  'Health & Fitness': {
    level: 0,
    icon: 'üí™',
    color: '#EF4444',
    children: {
      'Fitness & Exercise': {
        level: 1,
        children: [
          'Workout routines',
          'Home exercises',
          'Fitness challenges',
          'Sports & athletics',
          'Running & cardio tips',
          'Bodybuilding & strength training',
          'Fitness for seniors',
          'HIIT workouts',
          'Pilates routines',
          'Mobility exercises',
          'Pre/postnatal fitness',
          'Fitness trackers & smartwatches',
          'Home gym setups',
          'Weightlifting programs',
          'Crossfit guides',
          'Gym equipment reviews',
          'Outdoor fitness',
          'Trail running guides',
          'Hiking & trekking tips',
          'Cycling tips & gear',
          'Swimming & aquatic workouts',
          'Fitness competitions',
          'Fitness motivation & challenges',
          'Transformation stories',
          'Personal trainer tips',
          'Group workout ideas',
          'Fitness apps & software',
          'Online coaching guides',
          'Fitness photography',
          'Dance & aerobic workouts',
          'Martial arts tutorials',
          'Boxing & kickboxing',
          'Mind-body exercises',
          'Yoga for beginners',
          'Yoga for flexibility',
          'Yoga for strength',
          'Fitness for teens',
          'Fitness for children',
          'Family fitness',
          'Fitness for office workers',
          'Posture correction exercises',
          'Mobility & flexibility apps',
          'Fitness challenges for groups',
          'Community wellness projects',
          'Charity fitness events',
          'Fitness events & competitions',
          'Fitness retreats',
          'At-home HIIT routines',
          'Home gym equipment reviews',
          'Bodyweight workouts',
          'Resistance band workouts',
          'Outdoor fitness ideas',
          'Running form and performance',
          'Triathlon training guides',
          'Marathon preparation plans',
          'Cycling tutorials',
          'Swimming workouts',
          'Mindfulness for athletes',
          'Injury recovery & rehab tips',
          'Fitness tracking app reviews',
          'Health gadgets & wearables',
          'Supplements for endurance sports',
          'Supplements for strength training',
        ],
      },
      'Nutrition & Diet': {
        level: 1,
        children: [
          'Nutrition & diets',
          'Healthy recipes',
          'Healthy meal planning',
          'Plant-based diets',
          'Keto & low-carb diets',
          'Intermittent fasting guides',
          'Smoothie & juice recipes',
          'Sports nutrition guides',
          'Protein & supplement guides',
          'Mindful eating tips',
          'Diet tracking apps',
          'Weight management programs',
          'Detox plans',
          'Vegan nutrition guides',
          'Keto diet tips & meal plans',
          'Intermittent fasting guides',
          'Healthy snack ideas',
          'Superfoods guides',
          'Diet planning for weight loss',
          'Meal prep tutorials',
          'Personalized nutrition apps',
          'Food journaling guides',
          'Hydration tips & tracking',
          'Healthy family meal plans',
        ],
      },
      'Mental Health & Wellness': {
        level: 1,
        children: [
          'Mental health guides',
          'Meditation & mindfulness',
          'Yoga tutorials',
          'Weight loss tips',
          'Mental health apps reviews',
          'Stress management techniques',
          'Emotional wellness tips',
          'Self-care routines',
          'Mindfulness apps reviews',
          'Yoga for stress relief',
          'Pilates tutorials',
          'Meditation apps reviews',
          'Mental health resources',
          'Anxiety management techniques',
          'Depression self-care tips',
          'Women\'s health',
          'Men\'s health',
          'Senior fitness routines',
          'Workplace wellness guides',
          'Home spa & wellness guides',
          'Sleep science updates',
          'Mental health blogs',
          'Mindfulness practices',
          'Meditation tutorials',
          'Stress management techniques',
          'Therapy & counseling guides',
          'Mental health apps',
          'Personal wellness coaching',
          'Self-care routines',
          'Healthy lifestyle habits',
          'Mind-body connection techniques',
        ],
      },
      'Supplements & Recovery': {
        level: 1,
        children: [
          'Supplements & vitamins',
          'Sleep & recovery',
          'Personal wellness',
          'Immune system boosting',
          'Anti-aging routines',
          'Biohacking & longevity',
          'Supplements & vitamins guides',
          'Immune system optimization',
          'Biohacking for productivity',
          'Sleep optimization tips',
        ],
      },
    },
  },
  'Lifestyle & Travel': {
    level: 0,
    icon: '‚úàÔ∏è',
    color: '#F59E0B',
    children: {
      'Travel': {
        level: 1,
        children: [
          'Travel guides',
          'Solo travel tips',
          'Budget travel',
          'Luxury travel',
          'Digital nomad lifestyle',
          'Travel photography',
          'Destination reviews',
          'Travel hacks & tips',
          'Airfare deals & comparisons',
          'Hotel & accommodation reviews',
          'Travel insurance guides',
          'Adventure travel',
          'Ecotourism',
          'Road trips guides',
          'Camping & outdoors',
          'Hiking & trekking guides',
          'Travel with pets',
          'Cruise travel guides',
          'Cultural festivals',
          'Expat living guides',
          'Remote work travel tips',
          'Travel safety guides',
          'City guides',
          'Weekend getaways',
          'Solo female travel tips',
          'Travel safety apps',
          'Sustainable travel guides',
          'Budget backpacking tips',
          'Digital nomad productivity',
          'Travel blogging monetization',
          'Influencer marketing for travel',
          'Travel YouTube channels',
          'Travel podcasting',
          'Destination videos & vlogs',
          'Airline reviews',
          'Airport guides',
          'Visa & immigration tips',
          'Travel apps & tools',
          'Language learning for travel',
          'Cultural etiquette guides',
          'Photography gear for travel',
          'Drone photography guides',
          'Adventure sports (skiing, diving)',
          'Road trip itineraries',
          'City nightlife guides',
          'Music festivals & events',
          'Wedding planning & destination weddings',
          'Event photography',
          'Party & celebration ideas',
          'Budget event planning',
          'Corporate event tips',
          'Travel contests & giveaways',
          'Eco-lodging & green hotels',
          'Glamping experiences',
          'Travel storytelling & writing',
          'Travel itinerary planning',
          'Eco-tourism insights',
          'Adventure travel blogs',
          'Backpacking guides',
          'Family travel tips',
          'Travel budget optimization',
          'Travel hacking tips',
          'Flight deals & booking guides',
          'Accommodation reviews',
          'Hostels vs hotels insights',
          'Travel insurance tips',
          'Visa & documentation guides',
          'Language learning for travelers',
          'Travel blogs monetization tips',
          'Sustainable travel practices',
          'Camping & glamping',
          'National park guides',
          'Urban exploration tips',
          'Weekend city breaks',
          'Hidden travel gems',
          'Extreme sports travel',
          'Mountain climbing guides',
          'Skiing & snowboarding travel',
          'Beach travel blogs',
          'Local food experiences',
          'Wine & culinary tours',
          'Travel podcasts reviews',
          'Digital travel tools',
          'Travel journaling & blogging',
          'Travel photography competitions',
          'Remote work travel guides',
          'Van life & RV travel',
          'Travel loyalty programs',
          'Travel affiliate marketing',
        ],
      },
      'Food & Cuisine': {
        level: 1,
        children: [
          'Food & cuisine blogs',
          'Recipe blogs',
          'Cooking tutorials',
          'Healthy recipes',
          'Food & beverage pairings',
          'Wine tasting & reviews',
          'Coffee culture & cafes',
          'Street food guides',
          'Culinary tourism',
          'Cooking for beginners',
          'Baking tutorials',
          'Meal prep guides',
          'Kitchen gadget reviews',
          'Food festivals & events',
          'Wine & brewery tours',
          'Culinary school reviews',
          'Cooking challenges & competitions',
          'Restaurant reviews & rankings',
          'Street food experiences',
          'Home brewing & winemaking',
          'International cuisine exploration',
          'Food photography tutorials',
        ],
      },
      'Home & Design': {
        level: 1,
        children: [
          'Interior design',
          'Home improvement',
          'Home organization',
          'Minimalist living',
          'Tiny house lifestyle',
          'Smart home tips',
          'DIY home decor',
          'Home renovation guides',
          'Interior styling tutorials',
          'Sustainable living',
          'Eco-friendly products',
          'Thrift & upcycling tips',
        ],
      },
      'Fashion & Beauty': {
        level: 1,
        children: [
          'Fashion & style',
          'Beauty & skincare',
          'Personal styling',
          'Seasonal fashion guides',
          'Capsule wardrobe creation',
          'Skincare tutorials',
          'Anti-aging tips',
          'Makeup tutorials',
          'Sustainable fashion',
          'Ethical brands reviews',
          'Capsule wardrobes',
          'Fashion influencer guides',
          'Seasonal lookbooks',
          'Street style photography',
          'Vintage clothing & thrifting',
          'DIY fashion & upcycling',
          'Fashion tech (wearables)',
          'Skincare product reviews',
          'Natural skincare guides',
          'Beauty subscription boxes reviews',
          'Haircare tutorials',
          'Makeup techniques',
          'Self-care kits',
        ],
      },
      'Personal Development': {
        level: 1,
        children: [
          'Self-improvement & productivity',
          'Career & personal growth',
          'Lifestyle productivity hacks',
          'Morning & evening routines',
          'Work-life balance guides',
          'Time management tips',
          'Goal setting & tracking',
          'Meditation for lifestyle improvement',
          'Mindfulness techniques',
          'Mental clarity & focus guides',
          'Career coaching tips',
          'Resume & LinkedIn tips',
          'Job interview strategies',
          'Networking for professionals',
          'Minimalist living tips',
          'Productivity hacks',
          'Time management strategies',
          'Personal growth journaling',
          'Mindfulness routines',
          'Life coaching insights',
          'Career pivot guides',
          'Goal-setting templates',
          'Habit tracking',
          'Emotional intelligence development',
          'Self-discipline techniques',
          'Stress management tools',
          'Remote work lifestyle',
          'Work-from-home productivity',
          'Digital nomad guides',
          'Daily routines of successful people',
          'Public speaking tips',
          'Negotiation strategies',
          'Networking guides',
          'Leadership development',
          'Decision-making frameworks',
          'Confidence-building techniques',
          'Personal finance for lifestyle',
          'Life hacks for efficiency',
          'Journaling for self-discovery',
          'Mental clarity exercises',
          'Memory improvement strategies',
          'Mind mapping tutorials',
          'Creativity exercises',
          'Minimalist wardrobe tips',
          'Eco-friendly lifestyle tips',
          'Sustainable living hacks',
          'Digital detox strategies',
          'Morning routine optimizations',
          'Evening routine hacks',
          'Personal branding',
          'Career advancement tips',
          'Work-life balance tips',
          'Goal-tracking apps',
          'Self-assessment quizzes',
          'Life challenges & gamification',
          'Personal accountability methods',
          'Daily productivity apps',
          'Meditation apps reviews',
          'Vision board tutorials',
          'Journaling prompts for growth',
          'Mindset transformation guides',
          'Overcoming procrastination',
          'Positive thinking exercises',
          'Minimalist home organization',
        ],
      },
    },
  },
  'Entertainment & Gaming': {
    level: 0,
    icon: 'üéÆ',
    color: '#8B5CF6',
    children: {
      'Gaming': {
        level: 1,
        children: [
          'Video game guides',
          'Mobile games',
          'Esports & tournaments',
          'Streaming guides (Twitch, YouTube)',
          'Video game walkthroughs',
          'Game modding guides',
          'Gaming hardware reviews',
          'Gaming accessories',
          'Retro gaming blogs',
          'Indie game reviews',
          'Game development tutorials',
          'Unity & Unreal Engine guides',
          'Game monetization strategies',
          'Mobile game reviews',
          'PC gaming builds',
          'Console gaming tips',
          'Esports news & updates',
          'Competitive gaming guides',
          'Gaming tournaments livestream',
          'PC game reviews',
          'Mobile game guides',
          'Console gaming tips',
          'Esports tournament updates',
          'Game streaming tutorials',
          'Twitch streaming guides',
          'YouTube gaming channel growth',
          'Retro gaming blogs',
          'Game development tutorials',
          'Indie game reviews',
          'VR/AR gaming experiences',
          'Gaming hardware reviews',
          'Gaming accessories reviews',
          'Multiplayer strategies',
          'Game modding tutorials',
          'Story-driven games analysis',
          'Board games & tabletop',
          'Role-playing games (RPG)',
          'Card games & strategy guides',
          'Cosplay tutorials & trends',
          'Game lore explanations',
          'Game speedrunning guides',
          'Game soundtracks & reviews',
          'Animation & cinematic gaming',
          'Gamified learning',
          'Mobile esports guides',
          'Competitive gaming coaching',
          'Gaming community management',
          'Game livestreaming tips',
          'Gaming monetization strategies',
          'Game marketing insights',
          'Game beta testing',
          'Game patch & update analysis',
          'Gaming memes & humor',
          'AI-assisted game design',
          'Virtual tournaments coverage',
          'Cloud gaming updates',
          'Gaming influencer strategies',
          'Gaming news & leaks',
          'Gaming culture & fandom',
          'Video game collectibles',
          'Speedrunning community news',
          'Game streaming setup guides',
          'Indie game dev interviews',
          'Game development software tutorials',
          'Gaming analytics & stats',
          'Game storytelling techniques',
          'Gaming merchandise reviews',
          'Game tournaments highlights',
          'AR-based interactive games',
        ],
      },
      'Movies & TV': {
        level: 1,
        children: [
          'Movies & TV reviews',
          'Movie/TV fan theories',
          'Movie production insights',
          'Film critiques & analysis',
          'Movie franchises guides',
          'Box office analysis',
          'Streaming platform reviews',
          'Film festivals coverage',
          'TV series guides',
          'Binge-watch recommendations',
          'Documentary reviews',
          'Animation blogs',
          'Voice acting guides',
          'Sound design tutorials',
          'Streaming platform comparisons',
          'Retro TV shows analysis',
        ],
      },
      'Music & Audio': {
        level: 1,
        children: [
          'Music news & reviews',
          'Music tutorials (instruments)',
          'Album reviews & rankings',
          'Music artist profiles',
          'Music streaming tips',
          'Music monetization',
          'Podcasting for entertainment',
          'Music event coverage',
          'Music festival guides',
          'Music gear reviews',
          'DJ & electronic music tips',
          'Podcasting monetization',
          'Music composition guides',
          'Sound engineering tutorials',
          'Recording studio setups',
          'Music collaboration platforms',
          'Online music courses',
          'Virtual band setups',
          'Podcast hosting platforms',
          'Soundtrack composition',
          'Music licensing guides',
        ],
      },
      'Anime & Manga': {
        level: 1,
        children: [
          'Anime & manga',
          'Anime reviews & guides',
          'Manga news & updates',
          'Cosplay tutorials',
          'Anime conventions',
        ],
      },
      'Content Creation': {
        level: 1,
        children: [
          'Streaming guides (Twitch, YouTube)',
          'Live streaming tips',
          'Video editing tutorials',
          'Motion graphics & VFX',
          'Animation software guides',
          'Indie film production',
          'VR storytelling',
          '360¬∞ video production',
          'Social media entertainment',
          'Memes & viral content',
          'Entertainment news curation',
          'Online comics',
          'Storytelling techniques',
          'Scriptwriting guides',
          'Film production gear',
          'Camera reviews & tutorials',
          'Photography for entertainment',
          'Live performance blogging',
          'Video editing tutorials',
          'Motion graphics blogs',
          'Film editing',
          'Color grading tutorials',
          'Special effects tutorials',
          'Virtual event streaming',
          'Live podcasting',
          'Entertainment app reviews',
          'Online event hosting',
          'Interactive media guides',
          'YouTube channel growth',
          'Streaming software tutorials',
          'Content creation tutorials',
          'Fan fiction guides',
        ],
      },
    },
  },
  'Education & Learning': {
    level: 0,
    icon: 'üìö',
    color: '#EC4899',
    children: {
      'Online Learning': {
        level: 1,
        children: [
          'Online courses reviews',
          'E-learning platforms',
          'Study guides & tips',
          'Language learning blogs',
          'Exam preparation guides',
          'Educational apps',
          'STEM learning tutorials',
          'Math problem solving',
          'Science experiments for students',
          'Coding for kids',
          'Programming tutorials',
          'Educational games',
          'Career guidance & advice',
          'Scholarship opportunities',
          'College & university reviews',
          'Student life & productivity',
          'Learning strategies & hacks',
          'Teaching methodologies',
          'Teacher resources & guides',
          'Classroom management tips',
          'Homeschooling guides',
          'Online tutoring tips',
          'Educational YouTube channels',
          'Learning disabilities support',
          'Educational podcasts',
          'EdTech reviews',
          'MOOC recommendations',
          'Student finance & budgeting',
          'Study abroad guides',
          'Test prep courses',
          'College application guides',
          'Internship & job prep',
          'Academic research blogs',
          'Scientific writing tips',
          'Online certification courses',
          'Language exchange platforms',
          'Learning productivity tools',
          'Online course creation',
          'Microlearning tips',
          'Skill-building guides',
          'Public speaking tutorials',
          'Writing & essay tips',
          'Reading comprehension guides',
          'Memory & learning techniques',
          'Exam stress management',
          'Learning communities',
          'Student motivation',
          'E-learning market trends',
          'Education industry news',
          'Adaptive learning systems',
          'AI-assisted learning tools',
          'Coding bootcamps reviews',
          'Study techniques for students',
          'E-learning platforms updates',
          'Exam preparation guides',
          'University ranking insights',
          'Scholarship opportunities',
          'Career-focused education',
          'Learning productivity hacks',
          'Flashcard apps & reviews',
          'Mind mapping for learning',
          'Memory retention techniques',
          'Online tutoring guides',
          'Educational podcasts',
          'STEM education guides',
          'Math tutorials',
          'Science experiment blogs',
          'History education resources',
          'Literature analysis blogs',
          'College application tips',
          'Student loan guides',
          'Learning communities online',
          'Skill-building workshops',
          'Certification courses reviews',
          'Personal development courses',
          'Creative writing courses',
          'AI for education',
          'Coding challenges & contests',
          'Scholarship essay guides',
          'EdTech innovations',
          'Educational software reviews',
          'Virtual classrooms insights',
          'Online learning productivity tools',
          'Exam question banks',
          'Study group management',
          'Language exchange platforms',
          'Learning analytics',
          'Tutoring marketplace reviews',
          'Learning style assessments',
          'Career skill development',
          'Professional certifications guides',
          'AI-powered tutoring platforms',
          'Distance learning tips',
          'Time management for students',
          'Internship guides',
          'Portfolio building for students',
          'Job interview prep for freshers',
          'Continuing education for adults',
        ],
      },
    },
  },
  'Science & Technology': {
    level: 0,
    icon: 'üî¨',
    color: '#06B6D4',
    children: {
      'Science': {
        level: 1,
        children: [
          'Space exploration',
          'Astronomy blogs',
          'Physics tutorials',
          'Chemistry experiments',
          'Biology insights',
          'Environmental science',
          'Climate change updates',
          'Renewable energy blogs',
          'Scientific discoveries',
          'Robotics guides',
          'Biotechnology news',
          'Genetics research',
          'Neuroscience & brain science',
          'Space technology',
          'Tech ethics & AI safety',
          'Scientific journals reviews',
          'Quantum mechanics simplified',
          'Science experiments at home',
          'Renewable energy projects',
          'Environmental impact blogs',
          'Wildlife conservation',
          'Marine biology',
          'Earth sciences & geology',
          'Astronomy apps & software',
          'Space telescopes & tools',
          'Astrophysics guides',
        ],
      },
      'Emerging Tech': {
        level: 1,
        children: [
          'Tech product reviews',
          'Innovative gadgets',
          'Green technology',
          'Sustainable innovations',
          'Health tech & biotech',
          'Wearable technology',
          'Smart devices reviews',
          'Tech startups news',
          'Crowdfunding tech projects',
          'IoT device guides',
          'AR/VR science applications',
          'Emerging tech insights',
          'Coding AI models',
          'Open-source AI projects',
          'Future of internet blogs',
        ],
      },
    },
  },
  'Arts, Culture & Creative': {
    level: 0,
    icon: 'üé®',
    color: '#F97316',
    children: {
      'Digital Arts': {
        level: 1,
        children: [
          'Digital art tutorials',
          'Painting & drawing guides',
          'Graphic design tips',
          'Photography tutorials',
          'Photo editing tips',
          'Illustration blogs',
          'Animation tutorials',
          '3D modeling guides',
          'Character design',
          'Creative writing blogs',
          'Poetry & short stories',
          'Literature reviews',
          'Book analysis',
          'Cultural studies',
          'Art history blogs',
          'Museum & gallery reviews',
          'Street art & urban culture',
          'Film & cinematography tips',
          'Music composition guides',
          'Dance tutorials',
          'Theater & performance art',
          'Costume design',
          'Stage design tips',
          'Creative DIY projects',
          'Handicrafts tutorials',
          'Pottery & ceramics',
          'Sculpture & 3D art',
          'Calligraphy & typography',
          'Digital content creation',
          'Podcasting creative topics',
          'Arts event coverage',
          'Cultural festival blogs',
          'Fashion design & trends',
          'Jewelry design',
          'Crafting & DIY monetization',
          'Creative entrepreneurship',
          'Freelance creative guides',
          'Art marketplaces reviews',
          'NFT art & digital collectibles',
          'Music production tips',
          'Sound design & synthesis',
          'Film scoring',
          'Voice acting tips',
          'Creative software reviews',
          'Adobe tutorials (Photoshop, Illustrator)',
          'Blender & 3D tutorials',
          'Video editing techniques',
          'Motion graphics blogs',
          'Storyboarding guides',
          'Creative portfolio building',
        ],
      },
    },
  },
  'Marketing & Monetization': {
    level: 0,
    icon: 'üìà',
    color: '#14B8A6',
    children: {
      'Marketing': {
        level: 1,
        children: [
          'Affiliate marketing guides',
          'E-commerce growth blogs',
          'Dropshipping strategies',
          'Email marketing tips',
          'SEO guides & tutorials',
          'Social media marketing',
          'Instagram growth strategies',
          'TikTok marketing',
          'YouTube monetization',
          'Podcast monetization',
          'Digital marketing tools',
          'Content marketing blogs',
          'Influencer marketing tips',
          'Brand building guides',
          'Conversion optimization',
          'Marketing analytics',
          'PPC & paid ads strategies',
          'Google Ads guides',
          'Facebook Ads tutorials',
          'LinkedIn marketing tips',
          'Marketing automation',
          'Growth hacking blogs',
          'Startup marketing insights',
          'Freelance marketing services',
          'Niche marketing strategies',
          'Micro-niche blog ideas',
          'Subscriptions & membership blogs',
          'Patreon & crowdfunding',
          'Merch & product monetization',
          'Online course monetization',
          'Webinar marketing',
          'SaaS marketing tips',
          'Mobile app marketing',
          'Influencer collaboration guides',
          'Affiliate program reviews',
          'Digital product creation',
          'Print-on-demand guides',
          'Side hustle blogs',
          'Passive income blogs',
          'Stock photography monetization',
          'Stock video & footage blogs',
          'Print & digital publication monetization',
          'Marketing funnels & strategies',
          'Conversion tracking guides',
          'SEO audit & optimization',
          'Keyword research tips',
          'AI content marketing',
          'ChatGPT & AI blogging',
          'AI content generation tools',
          'Future marketing trends',
        ],
      },
    },
  },
  'Gaming & Entertainment': {
    level: 0,
    icon: 'üéÆ',
    color: '#8B5CF6',
    children: {
      'Gaming': {
        level: 1,
        children: [
          'Video game reviews',
          'Mobile game guides',
          'Esports news & updates',
          'Streaming tips (Twitch, YouTube, etc.)',
          'Game walkthroughs',
          'Speedrunning tutorials',
          'Gaming hardware reviews',
          'Game development blogs',
          'Indie game highlights',
          'VR/AR gaming experiences',
          'Gaming competitions & tournaments',
          'Game lore & backstory blogs',
          'Mobile app game development',
          'Playtesting reviews',
          'Gaming news portals',
          'Retro gaming blogs',
          'Classic console guides',
          'Arcade gaming history',
          'Virtual world blogs',
          'Gamification strategies for education',
          'Game mod tutorials',
          'Collectibles & merchandise',
          'Movie & game crossovers',
          'Streaming platform updates',
        ],
      },
      'Anime & Manga': {
        level: 1,
        children: [
          'Anime reviews',
          'Manga news & updates',
          'Cosplay guides',
        ],
      },
      'Movies & TV': {
        level: 1,
        children: [
          'Movie reviews',
          'TV show recaps',
          'Pop culture commentary',
          'Celebrity gossip blogs',
          'Award shows coverage',
          'Fan theories',
          'Movie & game crossovers',
          'VR cinema experiences',
          'Indie films coverage',
          'Short film reviews',
        ],
      },
      'Music & Audio': {
        level: 1,
        children: [
          'Music reviews',
          'Music production tutorials',
          'Soundtrack reviews',
        ],
      },
      'Comics & Books': {
        level: 1,
        children: [
          'Comic book reviews',
          'Graphic novels insights',
          'Digital comics news',
        ],
      },
      'Board Games & Tabletop': {
        level: 1,
        children: [
          'Board game strategies',
          'Tabletop RPG guides',
        ],
      },
      'Content Creation': {
        level: 1,
        children: [
          'Live streaming tips',
          'Film editing tips',
          'Animation tutorials',
          'Visual effects insights',
          'Voice acting guides',
        ],
      },
    },
  },
  'Education & Learning': {
    level: 0,
    icon: 'üìö',
    color: '#EC4899',
    children: {
      'Online Learning': {
        level: 1,
        children: [
          'Online courses reviews',
          'EdTech tools',
          'Coding bootcamp insights',
          'Study hacks',
          'College guides',
          'Scholarship updates',
          'Career planning blogs',
          'Learning apps reviews',
          'Language learning tips',
          'Math tutorials',
          'Science experiments',
          'History deep dives',
          'Geography explorations',
          'Literature analysis',
          'Exam preparation guides',
          'Online tutoring platforms',
          'E-learning strategies',
          'Student productivity hacks',
          'Time management for students',
          'Mind mapping techniques',
          'Memory improvement techniques',
          'Speed reading tips',
          'STEM projects for kids',
          'Coding projects for beginners',
          'Robotics learning',
          'DIY electronics',
          'Educational YouTube content',
          'Interactive learning platforms',
          'MOOC reviews',
          'Teacher resource guides',
          'Classroom tech tips',
          'Educational podcasts',
          'Learning disabilities support',
          'Critical thinking exercises',
          'Debate & public speaking tips',
          'Research & writing guides',
          'Academic publishing insights',
          'Student wellness blogs',
          'Study abroad tips',
          'College application guides',
          'University rankings insights',
          'Online learning communities',
          'Skill development blogs',
          'Adult education tips',
          'Online certifications',
          'Career advancement courses',
          'Professional training reviews',
          'Apprenticeship opportunities',
          'Teacher interview tips',
          'EdTech product comparisons',
        ],
      },
    },
  },
  'Hobbies & Lifestyle': {
    level: 0,
    icon: 'üé®',
    color: '#F97316',
    children: {
      'Photography': {
        level: 1,
        children: [
          'Photography tutorials',
          'Travel photography blogs',
          'Film photography tips',
        ],
      },
      'Travel': {
        level: 1,
        children: [
          'Travel guides',
          'Budget travel tips',
          'Luxury travel experiences',
          'Travel gadgets reviews',
          'Digital nomad lifestyle',
          'Vanlife & RV blogs',
        ],
      },
      'Food & Cooking': {
        level: 1,
        children: [
          'Food & recipe blogs',
          'Cooking tutorials',
          'Baking guides',
          'Specialty diets',
          'Cultural experiences',
        ],
      },
      'Home & Design': {
        level: 1,
        children: [
          'Interior design tips',
          'Home improvement guides',
          'DIY home projects',
          'Gardening blogs',
          'Sustainable living tips',
        ],
      },
      'Fashion & Beauty': {
        level: 1,
        children: [
          'Fashion & style blogs',
          'Beauty & skincare guides',
          'Haircare tips',
          'Makeup tutorials',
          'Perfume & fragrance reviews',
          'Jewelry trends',
          'Personal styling blogs',
        ],
      },
      'Events & Planning': {
        level: 1,
        children: [
          'Wedding planning guides',
          'Event planning tips',
          'Party decoration ideas',
        ],
      },
      'Lifestyle': {
        level: 1,
        children: [
          'Minimalism & decluttering',
          'Hobbies for adults',
        ],
      },
      'Arts & Crafts': {
        level: 1,
        children: [
          'Craft tutorials',
          'Painting & drawing guides',
          'Digital art tutorials',
        ],
      },
      'Music & Audio': {
        level: 1,
        children: [
          'Music tutorials',
          'Musical instrument guides',
          'Podcast creation tips',
          'Audiobook reviews',
        ],
      },
      'Media Production': {
        level: 1,
        children: [
          'Video editing guides',
          'Animation projects',
        ],
      },
      'Games & Collectibles': {
        level: 1,
        children: [
          'Board game strategies',
          'Card game blogs',
          'Collectibles & antiques',
          'Comic book collecting',
          'Gaming collectibles',
        ],
      },
      'Pets': {
        level: 1,
        children: [
          'Pet care blogs',
          'Dog training guides',
          'Cat care tips',
          'Exotic pets blogs',
          'Aquascaping & fishkeeping',
        ],
      },
    },
  },
};

// Function to create categories recursively
async function createCategories(parentId = null, categories, level = 0) {
  const createdCategories = [];
  
  for (const [name, data] of Object.entries(categories)) {
    try {
      // Check if category already exists
      let category = await Category.findOne({ slug: name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') });
      
      if (!category) {
        category = await Category.create({
          name,
          slug: name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, ''),
          description: `Explore ${name} content and resources`,
          parent: parentId,
          level,
          icon: data.icon || null,
          color: data.color || null,
          featured: level === 0, // Feature top-level categories
          order: level === 0 ? Object.keys(categories).indexOf(name) : 0,
          isActive: true,
        });
        console.log(`‚úÖ Created category: ${name} (Level ${level})`);
      } else {
        console.log(`‚è≠Ô∏è  Category already exists: ${name}`);
      }
      
      createdCategories.push(category);
      
      // Handle children (subcategories)
      if (data.children && typeof data.children === 'object') {
        if (Array.isArray(data.children)) {
          // Array of category names
          for (const childName of data.children) {
            try {
              const childSlug = childName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');
              let childCategory = await Category.findOne({ slug: childSlug });
              
              if (!childCategory) {
                childCategory = await Category.create({
                  name: childName,
                  slug: childSlug,
                  description: `Explore ${childName} content`,
                  parent: category._id,
                  level: level + 1,
                  isActive: true,
                  order: data.children.indexOf(childName),
                });
                console.log(`  ‚úÖ Created subcategory: ${childName}`);
              }
            } catch (error) {
              console.error(`  ‚ùå Error creating subcategory ${childName}:`, error.message);
            }
          }
        } else {
          // Nested object structure
          await createCategories(category._id, data.children, level + 1);
        }
      }
    } catch (error) {
      console.error(`‚ùå Error creating category ${name}:`, error.message);
    }
  }
  
  return createdCategories;
}

// Main seeding function
async function seedCategories() {
  try {
    const mongoUri = process.env.MONGODB_URI || 'mongodb://localhost:27017/gidi-blog';
    
    console.log('üîå Attempting to connect to MongoDB...');
    console.log(`üìç Connection string: ${mongoUri.includes('@') ? mongoUri.split('@')[1] : mongoUri}`);
    
    await mongoose.connect(mongoUri, {
      serverSelectionTimeoutMS: 10000, // 10 seconds timeout
      socketTimeoutMS: 45000,
    });
    
    console.log('üì¶ Connected to MongoDB successfully!');
    
    console.log('\nüå± Starting category seeding...\n');
    
    await createCategories(null, categoryTaxonomy, 0);
    
    const totalCategories = await Category.countDocuments();
    console.log(`\n‚úÖ Category seeding completed!`);
    console.log(`üìä Total categories in database: ${totalCategories}`);
    
    await mongoose.connection.close();
    console.log('üîå Database connection closed.');
    process.exit(0);
  } catch (error) {
    console.error('\n‚ùå Error seeding categories:', error.message);
    
    if (error.message.includes('IP') || error.message.includes('whitelist')) {
      console.error('\nüîí MongoDB Atlas IP Whitelist Issue Detected!');
      console.error('\nüìù To fix this:');
      console.error('1. Go to MongoDB Atlas: https://cloud.mongodb.com/');
      console.error('2. Navigate to: Network Access ‚Üí IP Access List');
      console.error('3. Click "Add IP Address"');
      console.error('4. Option A: Add your current IP (check at: https://whatismyipaddress.com/)');
      console.error('5. Option B: For development, add 0.0.0.0/0 (allows all IPs - less secure)');
      console.error('6. Wait 1-2 minutes for changes to propagate');
      console.error('7. Run the seed script again\n');
    } else if (error.message.includes('authentication')) {
      console.error('\nüîê Authentication Error!');
      console.error('Check your MongoDB connection string in .env file');
      console.error('Make sure username and password are correct\n');
    } else if (error.message.includes('ENOTFOUND') || error.message.includes('timeout')) {
      console.error('\nüåê Connection Timeout!');
      console.error('Check your internet connection and MongoDB Atlas cluster status');
      console.error('Or try using local MongoDB: mongodb://localhost:27017/gidi-blog\n');
    }
    
    process.exit(1);
  }
}

// Run if called directly
if (require.main === module) {
  seedCategories();
}

module.exports = { seedCategories, categoryTaxonomy };

